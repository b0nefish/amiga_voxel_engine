**************************************************************************************
*	SCRGRABS.S
*
*	ScreenGrab routines
*
*	[c] 2001 Reservoir Gods
**************************************************************************************

**************************************************************************************
;	EXPORTS / IMPORTS
**************************************************************************************

	export	ScreenGrab_Vbl
	export	gScreenGrabVblLockFlag
	
	import	ScreenGrab_Update
	import	gScreenGrabEnableFlag


**************************************************************************************
	TEXT
**************************************************************************************

*------------------------------------------------------------------------------------*
* FUNCTION : ScreenGrab_Vbl
* ACTION   : interrupt routine
* CREATION : 01.05.01 PNK
*------------------------------------------------------------------------------------*

ScreenGrab_Vbl:
	
	tst.b	gScreenGrabEnableFlag
	beq		.nograb
	tas.b	gScreenGrabVblLockFlag
	bne		.nograb

	movem.l	d0-a6,-(a7)
	jsr		ScreenGrab_Update
	movem.l	(a7)+,d0-a6

	clr.b	gScreenGrabVblLockFlag
.nograb:

	rts


**************************************************************************************
	DATA
**************************************************************************************

gScreenGrabVblLockFlag:	dc.b	0
